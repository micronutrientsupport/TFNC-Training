<!DOCTYPE html>
<!-- saved from url=(0022)http://localhost:4536/ -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>The food conversion factor in NPS-DSS 2019-2020, NPS Wave 5</title>
<style class="anchorjs"></style><style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="./foodconversionfactor_files/clipboard.min.js.ダウンロード"></script>
<script src="./foodconversionfactor_files/quarto.js.ダウンロード"></script>
<script src="./foodconversionfactor_files/popper.min.js.ダウンロード"></script>
<script src="./foodconversionfactor_files/tippy.umd.min.js.ダウンロード"></script>
<script src="./foodconversionfactor_files/anchor.min.js.ダウンロード"></script>
<link href="./foodconversionfactor_files/tippy.css" rel="stylesheet">
<link href="./foodconversionfactor_files/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="./foodconversionfactor_files/bootstrap.min.js.ダウンロード"></script>
<link href="./foodconversionfactor_files/bootstrap-icons.css" rel="stylesheet">
<link href="./foodconversionfactor_files/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="http://localhost:4536/#the-food-conversion-factor" id="toc-the-food-conversion-factor" class="nav-link" data-scroll-target="#the-food-conversion-factor">The food conversion factor</a>
  <ul class="">
  <li><a href="http://localhost:4536/#liquid-food-conversion" id="toc-liquid-food-conversion" class="nav-link active" data-scroll-target="#liquid-food-conversion">Liquid food conversion</a></li>
  <li><a href="http://localhost:4536/#non-standard-unit-conversion---pieces-by-different-food-items" id="toc-non-standard-unit-conversion---pieces-by-different-food-items" class="nav-link" data-scroll-target="#non-standard-unit-conversion---pieces-by-different-food-items">Non-standard unit conversion - PIECES by different food items</a></li>
  </ul></li>
  <li><a href="http://localhost:4536/#r-scripts---listing-up-the-food-items" id="toc-r-scripts---listing-up-the-food-items" class="nav-link" data-scroll-target="#r-scripts---listing-up-the-food-items">R scripts - Listing up the food items</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">The food conversion factor in NPS-DSS 2019-2020, NPS Wave 5</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="the-food-conversion-factor" class="level2">
<h2 class="anchored" data-anchor-id="the-food-conversion-factor">The food conversion factor<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:4536/#the-food-conversion-factor" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>The household recorded the amount of food items consumed in the last 7 days using various units such as KILOGRAMS, GRAMS, LITRES, MILLILITRES, and PIECES. All units need to be converted into GRAMS for uniformity.</p>
<p>To convert KILOGRAMS to GRAMS, the conversion factor of 1000 was used, as 1 KILOGRAM equals 1000 GRAMS.</p>
<section id="liquid-food-conversion" class="level3">
<h3 class="anchored" data-anchor-id="liquid-food-conversion">Liquid food conversion<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:4536/#liquid-food-conversion" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>For liquid food items, LITRES and MILLILITRES were used. To convert LITRES to GRAMS, the density of the liquid (in g/ml) was taken into account, and the conversion was done using the following formula:</p>
<p>LITRE * Density (g/ml) * 1000 = GRAMS</p>
<p>To convert MILLILITRES to GRAMS, the density was multiplied by the volume in MILLILITRES as follows:</p>
<p>MILLILITRE * Density (g/ml) = GRAMS</p>
<p>To convert liquid volumes to weight, the following steps should be followed:</p>
<ol type="1">
<li><p>Use the FAO/INFOODS Density Database - Version 2, which is an Excel file that provides density values for various food items. The database is available for download at <a href="https://www.fao.org/infoods/infoods/tables-and-databases/faoinfoods-databases/en/" class="uri">https://www.fao.org/infoods/infoods/tables-and-databases/faoinfoods-databases/en/</a>.</p></li>
<li><p>Calculate the mean values of liquid density using food items listed in the FAO/INFOOD Density Database that are commonly consumed in Tanzania. It is important to select food items that are representative of the local diet to obtain accurate conversion factors.</p></li>
</ol>
<p>*Honey, syrups, jams, marmalade, jellies, canned fruits Honey is not listed in the FAO/INFOOD Density Database. Therefore, the liquid density of honey needs to be calculated separately. Use other references, for example, The “Weights, Measures, and Conversion Factors for Agricultural Commodities and Their Products” produced by the U.S. Department of Agriculture <a href="https://www.ers.usda.gov/webdocs/publications/41880/33132_ah697_002.pdf" class="uri">https://www.ers.usda.gov/webdocs/publications/41880/33132_ah697_002.pdf</a> provides the necessary information; see page 13 - using this information, the liquid density of honey can be calculated (1 gallon = 3.78541 litres) and included in the calculation of the mean liquid density value of the other food items.</p>
<p>Food items that reported by LITRE and MILLILITRE</p>
<table class="table">
<colgroup>
<col style="width: 31%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 27%">
</colgroup>
<thead>
<tr class="header">
<th>itemcode</th>
<th style="text-align: left;">N</th>
<th>Food item in FAO/INFOODS</th>
<th style="text-align: center;">Liquid density</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>COOKING OIL</td>
<td style="text-align: left;">978</td>
<td>Oils and fats</td>
<td style="text-align: center;">Calculate the mean of liquid density including oils commonly use in Tanzania.</td>
</tr>
<tr class="even">
<td>HONEY, SYRUPS, JAMS, MARMALADE, JELLIES, CANNED FRUITS</td>
<td style="text-align: left;">277</td>
<td>Sweets</td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td>FRESH MILK</td>
<td style="text-align: left;">262</td>
<td>Milk and dairy products</td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td>BOTTLED/CANNED SOFT DRINKS (SODA, JUICE, WATER)</td>
<td style="text-align: left;">211</td>
<td>Beverages, non alcoholic (including soft drinks and juices)</td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td>MILK PRODUCTS (LIKE CREAM, CHEESE, YOGHURT ETC)</td>
<td style="text-align: left;">107</td>
<td>Dairy products</td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td>LOCAL BREWS</td>
<td style="text-align: left;">39</td>
<td>Spirits and liqueurs</td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td>BOTTLED BEER</td>
<td style="text-align: left;">23</td>
<td>Beer</td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td>WINE AND SPIRITS</td>
<td style="text-align: left;">5</td>
<td>Wine and cider</td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td>PREPARED TEA, COFFEE</td>
<td style="text-align: left;">1</td>
<td>Tea, cacao, coffee and drinking powders</td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>
<p>(To get the list - see the R script below.)</p>
</section>
<section id="non-standard-unit-conversion---pieces-by-different-food-items" class="level3">
<h3 class="anchored" data-anchor-id="non-standard-unit-conversion---pieces-by-different-food-items">Non-standard unit conversion - PIECES by different food items<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:4536/#non-standard-unit-conversion---pieces-by-different-food-items" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h3>
<p>To convert food items reported in PIECES into weight, you can follow these steps:</p>
<ol type="1">
<li><p>Use the Tanzania Food Consumption Table (2008) Section 3 Food Portion Size Databases (pages 229-256), which are also available in an Excel format at the following link: <a href="https://www.hsph.harvard.edu/nutritionsource/food-tables/" class="uri">https://www.hsph.harvard.edu/nutritionsource/food-tables/</a></p></li>
<li><p>Determine the weight of the food item based on its size in pieces. You can either use the mean value or the median size of the food item (e.g.&nbsp;using the weight of a standard or medium-sized piece if it is commonly used).</p></li>
</ol>
<p>*COCONUTS - There is no available reference value for the weight of whole coconuts. Do you know any reference value in weight in Tanzania?</p>
<p>Food items that reported by PIECES</p>
<table class="table">
<colgroup>
<col style="width: 30%">
<col style="width: 20%">
<col style="width: 26%">
<col style="width: 23%">
</colgroup>
<thead>
<tr class="header">
<th>itemcode</th>
<th style="text-align: left;">N</th>
<th>Food item in Tanzania Food Composition Tables</th>
<th style="text-align: center;">Mean conversion factor</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>EGGS</td>
<td style="text-align: left;">206</td>
<td>#307 (Std 70)</td>
<td style="text-align: center;">70</td>
</tr>
<tr class="even">
<td>COCONUTS (MATURE/IMMATURE)</td>
<td style="text-align: left;">32</td>
<td>No whole coconuts - any reference?</td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td>CHICKEN AND OTHER POULTRY</td>
<td style="text-align: left;">28</td>
<td>#554 (S 50, M 100, L 200; A 200)</td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td>SWEETS</td>
<td style="text-align: left;">16</td>
<td>e.g.&nbsp;#532 African donuts?</td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td>MAIZE (GREEN, COB)</td>
<td style="text-align: left;">1</td>
<td>#13, 14 (S 100, M 350)</td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td>RIPE BANANAS</td>
<td style="text-align: left;">1</td>
<td>#102 (S 50, M 115, L 175)</td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td>CITRUS FRUITS (ORANGES, LEMON, TANGERINES, ETC.)</td>
<td style="text-align: left;">1</td>
<td>#114 Orange (S 120, M 170, L 200), #109 Lemon (Std 70), #124 Tangerine (S 40, M 70, L 100)</td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td>MANGOES, AVOCADOES AND OTHER FRUITS</td>
<td style="text-align: left;">1</td>
<td>#112 Mango (S 120, M 155, L 270), #101 Avocado (S 150, M 200, L 500), Other fruits?</td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td>WILD BIRDS AND INSECTS</td>
<td style="text-align: left;">1</td>
<td>?</td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>
<p>(To get the list - see the R script below.)</p>
</section>
</section>
<section id="r-scripts---listing-up-the-food-items" class="level2">
<h2 class="anchored" data-anchor-id="r-scripts---listing-up-the-food-items">R scripts - Listing up the food items<a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="http://localhost:4536/#r-scripts---listing-up-the-food-items" style="font: 1em / 1 anchorjs-icons; padding-left: 0.375em;"></a></h2>
<p>open dataJ1</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="http://localhost:4536/#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tidyverse' was built under R version 4.2.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
✔ ggplot2 3.4.0      ✔ purrr   1.0.1 
✔ tibble  3.1.8      ✔ dplyr   1.0.10
✔ tidyr   1.2.1      ✔ stringr 1.5.0 
✔ readr   2.1.3      ✔ forcats 0.5.2 </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'ggplot2' was built under R version 4.2.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tidyr' was built under R version 4.2.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'readr' was built under R version 4.2.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'purrr' was built under R version 4.2.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'stringr' was built under R version 4.2.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="http://localhost:4536/#cb10-1" aria-hidden="true" tabindex="-1"></a>dataJ1 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"HH_SEC_J1.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 71040 Columns: 13
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (11): interview__key, sdd_hhid, itemcode, hh_j01, hh_j02_1, hh_j03_1, hh...
dbl  (2): hh_j02_2, hh_j04

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>change variable names</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="http://localhost:4536/#cb12-1" aria-hidden="true" tabindex="-1"></a>dataJ1 <span class="ot">&lt;-</span> dataJ1 <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="http://localhost:4536/#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb12-3"><a href="http://localhost:4536/#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">cons_yn =</span> hh_j01,</span>
<span id="cb12-4"><a href="http://localhost:4536/#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">cons_unit =</span> hh_j02_1,</span>
<span id="cb12-5"><a href="http://localhost:4536/#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">cons_quant =</span> hh_j02_2,</span>
<span id="cb12-6"><a href="http://localhost:4536/#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">pur_unit =</span> hh_j03_1,</span>
<span id="cb12-7"><a href="http://localhost:4536/#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">pur_quant =</span> hh_j03_2,</span>
<span id="cb12-8"><a href="http://localhost:4536/#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">pur_THS =</span> hh_j04,</span>
<span id="cb12-9"><a href="http://localhost:4536/#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">prod_unit =</span> hh_j05_1,</span>
<span id="cb12-10"><a href="http://localhost:4536/#cb12-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">prod_quant =</span> hh_j05_2,</span>
<span id="cb12-11"><a href="http://localhost:4536/#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">gift_unit =</span> hh_j06_1,</span>
<span id="cb12-12"><a href="http://localhost:4536/#cb12-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">gift_quant =</span> hh_j06_2</span>
<span id="cb12-13"><a href="http://localhost:4536/#cb12-13" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>change NONE to NA in quantity of food items (pur_quant, prod_quant, gift_quant)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="http://localhost:4536/#cb13-1" aria-hidden="true" tabindex="-1"></a>dataJ1 <span class="ot">&lt;-</span> dataJ1 <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="http://localhost:4536/#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb13-3"><a href="http://localhost:4536/#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">pur_quant =</span> <span class="fu">na_if</span>(pur_quant, <span class="st">"NONE"</span>), </span>
<span id="cb13-4"><a href="http://localhost:4536/#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">prod_quant =</span> <span class="fu">na_if</span>(prod_quant, <span class="st">"NONE"</span>), </span>
<span id="cb13-5"><a href="http://localhost:4536/#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">gift_quant =</span> <span class="fu">na_if</span>(gift_quant, <span class="st">"NONE"</span>)</span>
<span id="cb13-6"><a href="http://localhost:4536/#cb13-6" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>change variable types</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="http://localhost:4536/#cb14-1" aria-hidden="true" tabindex="-1"></a>dataJ1 <span class="ot">&lt;-</span> dataJ1 <span class="sc">%&gt;%</span></span>
<span id="cb14-2"><a href="http://localhost:4536/#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb14-3"><a href="http://localhost:4536/#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">itemcode =</span> <span class="fu">as.factor</span>(itemcode),</span>
<span id="cb14-4"><a href="http://localhost:4536/#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">cons_yn =</span> <span class="fu">as.factor</span>(cons_yn),</span>
<span id="cb14-5"><a href="http://localhost:4536/#cb14-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">cons_unit =</span> <span class="fu">as.factor</span>(cons_unit),</span>
<span id="cb14-6"><a href="http://localhost:4536/#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">cons_quant =</span> <span class="fu">as.numeric</span>(cons_quant),</span>
<span id="cb14-7"><a href="http://localhost:4536/#cb14-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">pur_unit =</span> <span class="fu">as.factor</span>(pur_quant),</span>
<span id="cb14-8"><a href="http://localhost:4536/#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">pur_quant =</span> <span class="fu">as.numeric</span>(pur_quant),</span>
<span id="cb14-9"><a href="http://localhost:4536/#cb14-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">prod_unit =</span> <span class="fu">as.factor</span>(prod_unit),</span>
<span id="cb14-10"><a href="http://localhost:4536/#cb14-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">prod_quant =</span> <span class="fu">as.numeric</span>(prod_quant),</span>
<span id="cb14-11"><a href="http://localhost:4536/#cb14-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">gift_unit =</span> <span class="fu">as.factor</span>(gift_unit),</span>
<span id="cb14-12"><a href="http://localhost:4536/#cb14-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">gift_quant =</span> <span class="fu">as.numeric</span>(gift_quant)</span>
<span id="cb14-13"><a href="http://localhost:4536/#cb14-13" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>add item_id for 60 food items</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="http://localhost:4536/#cb15-1" aria-hidden="true" tabindex="-1"></a>dataJ1 <span class="ot">&lt;-</span> dataJ1 <span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a href="http://localhost:4536/#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">item_id =</span> <span class="fu">case_when</span>(</span>
<span id="cb15-3"><a href="http://localhost:4536/#cb15-3" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'RICE (PADDY)'</span>) <span class="sc">~</span> <span class="dv">101</span>,</span>
<span id="cb15-4"><a href="http://localhost:4536/#cb15-4" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'RICE (HUSKED)'</span>) <span class="sc">~</span> <span class="dv">102</span>,</span>
<span id="cb15-5"><a href="http://localhost:4536/#cb15-5" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'MAIZE (GREEN, COB)'</span>) <span class="sc">~</span> <span class="dv">103</span>,</span>
<span id="cb15-6"><a href="http://localhost:4536/#cb15-6" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'MAIZE (GRAIN)'</span>) <span class="sc">~</span> <span class="dv">104</span>,</span>
<span id="cb15-7"><a href="http://localhost:4536/#cb15-7" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'MAIZE (FLOUR)'</span>) <span class="sc">~</span> <span class="dv">105</span>,</span>
<span id="cb15-8"><a href="http://localhost:4536/#cb15-8" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'MILLET AND SORGHUM (GRAIN)'</span>) <span class="sc">~</span> <span class="dv">106</span>,</span>
<span id="cb15-9"><a href="http://localhost:4536/#cb15-9" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'MILLET AND SORGHUM (FLOUR)'</span>) <span class="sc">~</span> <span class="dv">107</span>,</span>
<span id="cb15-10"><a href="http://localhost:4536/#cb15-10" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'BREAD'</span>) <span class="sc">~</span> <span class="dv">109</span>,</span>
<span id="cb15-11"><a href="http://localhost:4536/#cb15-11" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'BUNS, CAKES AND BISCUITS'</span>) <span class="sc">~</span> <span class="dv">110</span>,</span>
<span id="cb15-12"><a href="http://localhost:4536/#cb15-12" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'MACARONI, SPAGHETTI'</span>) <span class="sc">~</span> <span class="dv">111</span>,</span>
<span id="cb15-13"><a href="http://localhost:4536/#cb15-13" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'OTHER CEREAL PRODUCTS'</span>) <span class="sc">~</span> <span class="dv">112</span>,</span>
<span id="cb15-14"><a href="http://localhost:4536/#cb15-14" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'CASSAVA FRESH'</span>) <span class="sc">~</span> <span class="dv">201</span>,</span>
<span id="cb15-15"><a href="http://localhost:4536/#cb15-15" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'CASSAVA DRY/FLOUR'</span>) <span class="sc">~</span> <span class="dv">202</span>,</span>
<span id="cb15-16"><a href="http://localhost:4536/#cb15-16" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'SWEET POTATOES'</span>) <span class="sc">~</span> <span class="dv">203</span>,</span>
<span id="cb15-17"><a href="http://localhost:4536/#cb15-17" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'YAMS/COCOYAMS'</span>) <span class="sc">~</span> <span class="dv">204</span>,</span>
<span id="cb15-18"><a href="http://localhost:4536/#cb15-18" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'IRISH POTATOES'</span>) <span class="sc">~</span> <span class="dv">205</span>,</span>
<span id="cb15-19"><a href="http://localhost:4536/#cb15-19" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'COOKING BANANAS, PLANTAINS'</span>) <span class="sc">~</span> <span class="dv">206</span>,</span>
<span id="cb15-20"><a href="http://localhost:4536/#cb15-20" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'OTHER STARCHES'</span>) <span class="sc">~</span> <span class="dv">207</span>,</span>
<span id="cb15-21"><a href="http://localhost:4536/#cb15-21" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'SUGAR'</span>) <span class="sc">~</span> <span class="dv">301</span>,</span>
<span id="cb15-22"><a href="http://localhost:4536/#cb15-22" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'SWEETS'</span>) <span class="sc">~</span> <span class="dv">302</span>,</span>
<span id="cb15-23"><a href="http://localhost:4536/#cb15-23" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'HONEY, SYRUPS, JAMS, MARMALADE, JELLIES, CANNED FRUITS'</span>) <span class="sc">~</span> <span class="dv">303</span>,</span>
<span id="cb15-24"><a href="http://localhost:4536/#cb15-24" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'PEAS, BEANS, LENTILS AND OTHER PULSES'</span>) <span class="sc">~</span> <span class="dv">401</span>,</span>
<span id="cb15-25"><a href="http://localhost:4536/#cb15-25" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'GROUNDNUTS IN SHELL/SHELLED'</span>) <span class="sc">~</span> <span class="dv">501</span>,</span>
<span id="cb15-26"><a href="http://localhost:4536/#cb15-26" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'COCONUTS (MATURE/IMMATURE)'</span>) <span class="sc">~</span> <span class="dv">502</span>,</span>
<span id="cb15-27"><a href="http://localhost:4536/#cb15-27" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'CASHEW, ALMONDS AND OTHER NUTS'</span>) <span class="sc">~</span> <span class="dv">503</span>,</span>
<span id="cb15-28"><a href="http://localhost:4536/#cb15-28" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'SEEDS AND PRODUCTS FROM NUTS/SEEDS (EXCL. COOKING OIL)'</span>) <span class="sc">~</span> <span class="dv">504</span>,</span>
<span id="cb15-29"><a href="http://localhost:4536/#cb15-29" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'ONIONS, TOMATOES, CARROTS AND GREEN PEPPER, OTHER VIUNGO'</span>) <span class="sc">~</span> <span class="dv">601</span>,</span>
<span id="cb15-30"><a href="http://localhost:4536/#cb15-30" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'SPINACH, CABBAGE AND OTHER GREEN VEGETABLES'</span>) <span class="sc">~</span> <span class="dv">602</span>,</span>
<span id="cb15-31"><a href="http://localhost:4536/#cb15-31" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'CANNED, DRIED AND WILD VEGETABLES'</span>) <span class="sc">~</span> <span class="dv">603</span>,</span>
<span id="cb15-32"><a href="http://localhost:4536/#cb15-32" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'RIPE BANANAS'</span>) <span class="sc">~</span> <span class="dv">701</span>,</span>
<span id="cb15-33"><a href="http://localhost:4536/#cb15-33" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'CITRUS FRUITS (ORANGES, LEMON, TANGERINES, ETC.)'</span>) <span class="sc">~</span> <span class="dv">702</span>,</span>
<span id="cb15-34"><a href="http://localhost:4536/#cb15-34" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'MANGOES, AVOCADOES AND OTHER FRUITS'</span>) <span class="sc">~</span> <span class="dv">703</span>,</span>
<span id="cb15-35"><a href="http://localhost:4536/#cb15-35" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'SUGARCANE'</span>) <span class="sc">~</span> <span class="dv">704</span>,</span>
<span id="cb15-36"><a href="http://localhost:4536/#cb15-36" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'GOAT MEAT'</span>) <span class="sc">~</span> <span class="dv">801</span>,</span>
<span id="cb15-37"><a href="http://localhost:4536/#cb15-37" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'BEEF INCLUDING MINCED SAUSAGE'</span>) <span class="sc">~</span> <span class="dv">802</span>,</span>
<span id="cb15-38"><a href="http://localhost:4536/#cb15-38" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'PORK INCLUDING SAUSAGES AND BACON'</span>) <span class="sc">~</span> <span class="dv">803</span>,</span>
<span id="cb15-39"><a href="http://localhost:4536/#cb15-39" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'CHICKEN AND OTHER POULTRY'</span>) <span class="sc">~</span> <span class="dv">804</span>,</span>
<span id="cb15-40"><a href="http://localhost:4536/#cb15-40" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'WILD BIRDS AND INSECTS'</span>) <span class="sc">~</span> <span class="dv">805</span>,</span>
<span id="cb15-41"><a href="http://localhost:4536/#cb15-41" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'OTHER DOMESTIC/WILD MEAT PRODUCTS'</span>) <span class="sc">~</span> <span class="dv">806</span>,</span>
<span id="cb15-42"><a href="http://localhost:4536/#cb15-42" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'EGGS'</span>) <span class="sc">~</span> <span class="dv">807</span>,</span>
<span id="cb15-43"><a href="http://localhost:4536/#cb15-43" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'FRESH FISH AND SEAFOOD (INCLUDING DAGAA)'</span>) <span class="sc">~</span> <span class="dv">808</span>,</span>
<span id="cb15-44"><a href="http://localhost:4536/#cb15-44" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'DRIED/SALTED/CANNED FISH AND SEAFOOD (INCL. DAGAA)'</span>) <span class="sc">~</span> <span class="dv">809</span>,</span>
<span id="cb15-45"><a href="http://localhost:4536/#cb15-45" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'PACKAGE FISH'</span>) <span class="sc">~</span> <span class="dv">810</span>,</span>
<span id="cb15-46"><a href="http://localhost:4536/#cb15-46" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'FRESH MILK'</span>) <span class="sc">~</span> <span class="dv">901</span>,</span>
<span id="cb15-47"><a href="http://localhost:4536/#cb15-47" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'MILK PRODUCTS (LIKE CREAM, CHEESE, YOGHURT ETC)'</span>) <span class="sc">~</span> <span class="dv">902</span>,</span>
<span id="cb15-48"><a href="http://localhost:4536/#cb15-48" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'CANNED MILK/MILK POWDER'</span>) <span class="sc">~</span> <span class="dv">903</span>,</span>
<span id="cb15-49"><a href="http://localhost:4536/#cb15-49" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'COOKING OIL'</span>) <span class="sc">~</span> <span class="dv">1001</span>,</span>
<span id="cb15-50"><a href="http://localhost:4536/#cb15-50" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'BUTTER, MARGARINE, GHEE AND OTHER FAT PRODUCTS'</span>) <span class="sc">~</span> <span class="dv">1002</span>,</span>
<span id="cb15-51"><a href="http://localhost:4536/#cb15-51" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'SALT'</span>) <span class="sc">~</span> <span class="dv">1003</span>,</span>
<span id="cb15-52"><a href="http://localhost:4536/#cb15-52" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'OTHER SPICES'</span>) <span class="sc">~</span> <span class="dv">1004</span>,</span>
<span id="cb15-53"><a href="http://localhost:4536/#cb15-53" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'WHEAT FLOUR'</span>) <span class="sc">~</span> <span class="dv">1081</span>,</span>
<span id="cb15-54"><a href="http://localhost:4536/#cb15-54" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'WHEAT, BARLEY GRAIN AND OTHER CEREALS'</span>) <span class="sc">~</span> <span class="dv">1082</span>,</span>
<span id="cb15-55"><a href="http://localhost:4536/#cb15-55" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'TEA DRY'</span>) <span class="sc">~</span> <span class="dv">1101</span>,</span>
<span id="cb15-56"><a href="http://localhost:4536/#cb15-56" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'COFFEE AND COCOA'</span>) <span class="sc">~</span> <span class="dv">1102</span>,</span>
<span id="cb15-57"><a href="http://localhost:4536/#cb15-57" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'OTHER RAW MATERIALS FOR DRINKS'</span>) <span class="sc">~</span> <span class="dv">1103</span>,</span>
<span id="cb15-58"><a href="http://localhost:4536/#cb15-58" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'BOTTLED/CANNED SOFT DRINKS (SODA, JUICE, WATER)'</span>) <span class="sc">~</span> <span class="dv">1104</span>,</span>
<span id="cb15-59"><a href="http://localhost:4536/#cb15-59" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'PREPARED TEA, COFFEE'</span>) <span class="sc">~</span> <span class="dv">1105</span>,</span>
<span id="cb15-60"><a href="http://localhost:4536/#cb15-60" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'BOTTLED BEER'</span>) <span class="sc">~</span> <span class="dv">1106</span>,</span>
<span id="cb15-61"><a href="http://localhost:4536/#cb15-61" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'LOCAL BREWS'</span>) <span class="sc">~</span> <span class="dv">1107</span>,</span>
<span id="cb15-62"><a href="http://localhost:4536/#cb15-62" aria-hidden="true" tabindex="-1"></a>    (itemcode <span class="sc">==</span> <span class="st">'WINE AND SPIRITS'</span>) <span class="sc">~</span> <span class="dv">1108</span></span>
<span id="cb15-63"><a href="http://localhost:4536/#cb15-63" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>list up the food items reported by PIECES, or LITRE and MILLILITRE</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="http://localhost:4536/#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># list PIECES</span></span>
<span id="cb16-2"><a href="http://localhost:4536/#cb16-2" aria-hidden="true" tabindex="-1"></a>food_unit_P <span class="ot">&lt;-</span></span>
<span id="cb16-3"><a href="http://localhost:4536/#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(dataJ1, item_id, itemcode, cons_unit) <span class="sc">%&gt;%</span></span>
<span id="cb16-4"><a href="http://localhost:4536/#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cons_unit <span class="sc">==</span> <span class="st">"PIECES"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-5"><a href="http://localhost:4536/#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n))</span>
<span id="cb16-6"><a href="http://localhost:4536/#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="http://localhost:4536/#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co"># list LITRE</span></span>
<span id="cb16-8"><a href="http://localhost:4536/#cb16-8" aria-hidden="true" tabindex="-1"></a>food_unit_L <span class="ot">&lt;-</span></span>
<span id="cb16-9"><a href="http://localhost:4536/#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(dataJ1, item_id, itemcode, cons_unit) <span class="sc">%&gt;%</span></span>
<span id="cb16-10"><a href="http://localhost:4536/#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cons_unit <span class="sc">==</span> <span class="st">"LITRE"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb16-11"><a href="http://localhost:4536/#cb16-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n))</span>
<span id="cb16-12"><a href="http://localhost:4536/#cb16-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-13"><a href="http://localhost:4536/#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="co"># list MILLILITRE</span></span>
<span id="cb16-14"><a href="http://localhost:4536/#cb16-14" aria-hidden="true" tabindex="-1"></a>food_unit_mL <span class="ot">&lt;-</span></span>
<span id="cb16-15"><a href="http://localhost:4536/#cb16-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(dataJ1, item_id, itemcode, cons_unit) <span class="sc">%&gt;%</span></span>
<span id="cb16-16"><a href="http://localhost:4536/#cb16-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cons_unit <span class="sc">==</span> <span class="st">"MILLILITRE"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb16-17"><a href="http://localhost:4536/#cb16-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n))</span>
<span id="cb16-18"><a href="http://localhost:4536/#cb16-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-19"><a href="http://localhost:4536/#cb16-19" aria-hidden="true" tabindex="-1"></a><span class="co"># list both LITRE and MILLILITRE </span></span>
<span id="cb16-20"><a href="http://localhost:4536/#cb16-20" aria-hidden="true" tabindex="-1"></a>food_unit_LmL <span class="ot">&lt;-</span></span>
<span id="cb16-21"><a href="http://localhost:4536/#cb16-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(dataJ1, item_id, itemcode, cons_unit) <span class="sc">%&gt;%</span></span>
<span id="cb16-22"><a href="http://localhost:4536/#cb16-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cons_unit <span class="sc">==</span> <span class="st">"LITRE"</span> <span class="sc">|</span> cons_unit <span class="sc">==</span> <span class="st">"MILLILITRE"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb16-23"><a href="http://localhost:4536/#cb16-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<div class="modal__dialog micromodal-slide" id="quarto-log-error-modal" aria-hidden="true">
  <div class="modal__overlay" tabindex="2" data-micromodal-close="">
    <div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="quarto-log-error-modal-title">
      <header class="modal__header">
        <h2 class="modal__title" id="quarto-log-error-modal-title">
          <i class="bi bi-exclamation-circle"></i>Error
        </h2>
        <button class="modal__close" aria-label="Close modal" data-micromodal-close=""></button>
      </header>
      <div class="modal__content" id="quarto-log-error-modal-content">
        <pre tabindex="1" id="quarto-log-error-display"></pre>
      </div>
      <footer class="modal__footer">
      </footer>
    </div>
  </div>
</div>
<style type="text/css">
#quarto-log-error-modal .modal__overlay {
  z-index: 5000;
}
#quarto-log-error-modal-content {
  border: 1px solid #dee2e6;
  overflow-y: auto;
}
#quarto-log-error-display {
  min-height: 100px;
  padding: 8px;
  margin-bottom: 0;
  font-family: monospace;
}
#quarto-log-error-display:focus {
  outline: none;
}
.modal__dialog {
  font-size: 16px;
}
.modal__overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0,0,0,0.4);
  display: flex;
  justify-content: center;
  align-items: center;
}
.modal__container {
  position: fixed;
  top: 80px;
  background-color: #fff;
  padding: 15px;
  padding-top: 10px;
  min-width: 500px;
  max-width: 90%;
  max-height: 90vh;
  border-radius: 4px;
  overflow-y: auto;
  box-sizing: border-box;
}
.modal__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.modal__title {
  margin-top: 0;
  margin-bottom: 0;
  font-weight: 600;
  border-bottom: none;
  padding-bottom: 10px;
  font-size: 20px;
  color: rgb(191,71,65);
  line-height: 1.25;
  box-sizing: border-box;
}
.modal__title .bi {
  margin-right: 7px;
}
.modal__close {
  background: transparent;
  border: 0;
  margin-bottom: 10px;
}
.modal__header .modal__close:before { content: "\2715"; }
.modal__content {
  margin-top: 0;
  margin-bottom: 0;
}
@keyframes mmfadeIn {
    from { opacity: 0; }
      to { opacity: 1; }
}
@keyframes mmfadeOut {
    from { opacity: 1; }
      to { opacity: 0; }
}
@keyframes mmslideIn {
  from { transform: translateY(15%); }
    to { transform: translateY(0); }
}
@keyframes mmslideOut {
    from { transform: translateY(0); }
    to { transform: translateY(-10%); }
}
.micromodal-slide {
  display: none;
}
.micromodal-slide.is-open {
  display: block;
}
.micromodal-slide[aria-hidden="false"] .modal__overlay {
  animation: mmfadeIn .3s cubic-bezier(0.0, 0.0, 0.2, 1);
}
.micromodal-slide[aria-hidden="false"] .modal__container {
  animation: mmslideIn .3s cubic-bezier(0, 0, .2, 1);
}
.micromodal-slide[aria-hidden="true"] .modal__overlay {
  animation: mmfadeOut .3s cubic-bezier(0.0, 0.0, 0.2, 1);
}
.micromodal-slide[aria-hidden="true"] .modal__container {
  animation: mmslideOut .3s cubic-bezier(0, 0, .2, 1);
}
.micromodal-slide .modal__container,
.micromodal-slide .modal__overlay {
  will-change: transform;
} 
</style>
<script type="text/javascript">
  window.backupDefine = window.define; window.define = undefined;
  /*  ansi_up.js
   *  author : Dru Nelson
   *  license : MIT
   *  http://github.com/drudru/ansi_up
   */
   (function (root, factory) {
      if (typeof define === 'function' && define.amd) {
          // AMD. Register as an anonymous module.
          define(['exports'], factory);
      } else if (typeof exports === 'object' && typeof exports.nodeName !== 'string') {
          // CommonJS
          factory(exports);
      } else {
          // Browser globals
          var exp = {};
          factory(exp);
          root.AnsiUp = exp.default;
      }
  }(this, function (exports) {
  "use strict";
  var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {
      if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
      return cooked;
  };
  var PacketKind;
  (function (PacketKind) {
      PacketKind[PacketKind["EOS"] = 0] = "EOS";
      PacketKind[PacketKind["Text"] = 1] = "Text";
      PacketKind[PacketKind["Incomplete"] = 2] = "Incomplete";
      PacketKind[PacketKind["ESC"] = 3] = "ESC";
      PacketKind[PacketKind["Unknown"] = 4] = "Unknown";
      PacketKind[PacketKind["SGR"] = 5] = "SGR";
      PacketKind[PacketKind["OSCURL"] = 6] = "OSCURL";
  })(PacketKind || (PacketKind = {}));
  var AnsiUp = (function () {
      function AnsiUp() {
          this.VERSION = "5.1.0";
          this.setup_palettes();
          this._use_classes = false;
          this.bold = false;
          this.italic = false;
          this.underline = false;
          this.fg = this.bg = null;
          this._buffer = '';
          this._url_whitelist = { 'http': 1, 'https': 1 };
      }
      Object.defineProperty(AnsiUp.prototype, "use_classes", {
          get: function () {
              return this._use_classes;
          },
          set: function (arg) {
              this._use_classes = arg;
          },
          enumerable: false,
          configurable: true
      });
      Object.defineProperty(AnsiUp.prototype, "url_whitelist", {
          get: function () {
              return this._url_whitelist;
          },
          set: function (arg) {
              this._url_whitelist = arg;
          },
          enumerable: false,
          configurable: true
      });
      AnsiUp.prototype.setup_palettes = function () {
          var _this = this;
          this.ansi_colors =
              [
                  [
                      { rgb: [0, 0, 0], class_name: "ansi-black" },
                      { rgb: [187, 0, 0], class_name: "ansi-red" },
                      { rgb: [0, 187, 0], class_name: "ansi-green" },
                      { rgb: [187, 187, 0], class_name: "ansi-yellow" },
                      { rgb: [0, 0, 187], class_name: "ansi-blue" },
                      { rgb: [187, 0, 187], class_name: "ansi-magenta" },
                      { rgb: [0, 187, 187], class_name: "ansi-cyan" },
                      { rgb: [255, 255, 255], class_name: "ansi-white" }
                  ],
                  [
                      { rgb: [85, 85, 85], class_name: "ansi-bright-black" },
                      { rgb: [255, 85, 85], class_name: "ansi-bright-red" },
                      { rgb: [0, 255, 0], class_name: "ansi-bright-green" },
                      { rgb: [255, 255, 85], class_name: "ansi-bright-yellow" },
                      { rgb: [85, 85, 255], class_name: "ansi-bright-blue" },
                      { rgb: [255, 85, 255], class_name: "ansi-bright-magenta" },
                      { rgb: [85, 255, 255], class_name: "ansi-bright-cyan" },
                      { rgb: [255, 255, 255], class_name: "ansi-bright-white" }
                  ]
              ];
          this.palette_256 = [];
          this.ansi_colors.forEach(function (palette) {
              palette.forEach(function (rec) {
                  _this.palette_256.push(rec);
              });
          });
          var levels = [0, 95, 135, 175, 215, 255];
          for (var r = 0; r < 6; ++r) {
              for (var g = 0; g < 6; ++g) {
                  for (var b = 0; b < 6; ++b) {
                      var col = { rgb: [levels[r], levels[g], levels[b]], class_name: 'truecolor' };
                      this.palette_256.push(col);
                  }
              }
          }
          var grey_level = 8;
          for (var i = 0; i < 24; ++i, grey_level += 10) {
              var gry = { rgb: [grey_level, grey_level, grey_level], class_name: 'truecolor' };
              this.palette_256.push(gry);
          }
      };
      AnsiUp.prototype.escape_txt_for_html = function (txt) {
          return txt.replace(/[&<>"']/gm, function (str) {
              if (str === "&")
                  return "&amp;";
              if (str === "<")
                  return "&lt;";
              if (str === ">")
                  return "&gt;";
              if (str === "\"")
                  return "&quot;";
              if (str === "'")
                  return "&#x27;";
          });
      };
      AnsiUp.prototype.append_buffer = function (txt) {
          var str = this._buffer + txt;
          this._buffer = str;
      };
      AnsiUp.prototype.get_next_packet = function () {
          var pkt = {
              kind: PacketKind.EOS,
              text: '',
              url: ''
          };
          var len = this._buffer.length;
          if (len == 0)
              return pkt;
          var pos = this._buffer.indexOf("\x1B");
          if (pos == -1) {
              pkt.kind = PacketKind.Text;
              pkt.text = this._buffer;
              this._buffer = '';
              return pkt;
          }
          if (pos > 0) {
              pkt.kind = PacketKind.Text;
              pkt.text = this._buffer.slice(0, pos);
              this._buffer = this._buffer.slice(pos);
              return pkt;
          }
          if (pos == 0) {
              if (len == 1) {
                  pkt.kind = PacketKind.Incomplete;
                  return pkt;
              }
              var next_char = this._buffer.charAt(1);
              if ((next_char != '[') && (next_char != ']')) {
                  pkt.kind = PacketKind.ESC;
                  pkt.text = this._buffer.slice(0, 1);
                  this._buffer = this._buffer.slice(1);
                  return pkt;
              }
              if (next_char == '[') {
                  if (!this._csi_regex) {
                      this._csi_regex = rgx(__makeTemplateObject(["\n                        ^                           # beginning of line\n                                                    #\n                                                    # First attempt\n                        (?:                         # legal sequence\n                          \u001B[                      # CSI\n                          ([<-?]?)              # private-mode char\n                          ([d;]*)                    # any digits or semicolons\n                          ([ -/]?               # an intermediate modifier\n                          [@-~])                # the command\n                        )\n                        |                           # alternate (second attempt)\n                        (?:                         # illegal sequence\n                          \u001B[                      # CSI\n                          [ -~]*                # anything legal\n                          ([\0-\u001F:])              # anything illegal\n                        )\n                    "], ["\n                        ^                           # beginning of line\n                                                    #\n                                                    # First attempt\n                        (?:                         # legal sequence\n                          \\x1b\\[                      # CSI\n                          ([\\x3c-\\x3f]?)              # private-mode char\n                          ([\\d;]*)                    # any digits or semicolons\n                          ([\\x20-\\x2f]?               # an intermediate modifier\n                          [\\x40-\\x7e])                # the command\n                        )\n                        |                           # alternate (second attempt)\n                        (?:                         # illegal sequence\n                          \\x1b\\[                      # CSI\n                          [\\x20-\\x7e]*                # anything legal\n                          ([\\x00-\\x1f:])              # anything illegal\n                        )\n                    "]));
                  }
                  var match = this._buffer.match(this._csi_regex);
                  if (match === null) {
                      pkt.kind = PacketKind.Incomplete;
                      return pkt;
                  }
                  if (match[4]) {
                      pkt.kind = PacketKind.ESC;
                      pkt.text = this._buffer.slice(0, 1);
                      this._buffer = this._buffer.slice(1);
                      return pkt;
                  }
                  if ((match[1] != '') || (match[3] != 'm'))
                      pkt.kind = PacketKind.Unknown;
                  else
                      pkt.kind = PacketKind.SGR;
                  pkt.text = match[2];
                  var rpos = match[0].length;
                  this._buffer = this._buffer.slice(rpos);
                  return pkt;
              }
              if (next_char == ']') {
                  if (len < 4) {
                      pkt.kind = PacketKind.Incomplete;
                      return pkt;
                  }
                  if ((this._buffer.charAt(2) != '8')
                      || (this._buffer.charAt(3) != ';')) {
                      pkt.kind = PacketKind.ESC;
                      pkt.text = this._buffer.slice(0, 1);
                      this._buffer = this._buffer.slice(1);
                      return pkt;
                  }
                  if (!this._osc_st) {
                      this._osc_st = rgxG(__makeTemplateObject(["\n                        (?:                         # legal sequence\n                          (\u001B\\)                    # ESC                           |                           # alternate\n                          (\u0007)                      # BEL (what xterm did)\n                        )\n                        |                           # alternate (second attempt)\n                        (                           # illegal sequence\n                          [\0-\u0006]                 # anything illegal\n                          |                           # alternate\n                          [\b-\u001A]                 # anything illegal\n                          |                           # alternate\n                          [\u001C-\u001F]                 # anything illegal\n                        )\n                    "], ["\n                        (?:                         # legal sequence\n                          (\\x1b\\\\)                    # ESC \\\n                          |                           # alternate\n                          (\\x07)                      # BEL (what xterm did)\n                        )\n                        |                           # alternate (second attempt)\n                        (                           # illegal sequence\n                          [\\x00-\\x06]                 # anything illegal\n                          |                           # alternate\n                          [\\x08-\\x1a]                 # anything illegal\n                          |                           # alternate\n                          [\\x1c-\\x1f]                 # anything illegal\n                        )\n                    "]));
                  }
                  this._osc_st.lastIndex = 0;
                  {
                      var match_1 = this._osc_st.exec(this._buffer);
                      if (match_1 === null) {
                          pkt.kind = PacketKind.Incomplete;
                          return pkt;
                      }
                      if (match_1[3]) {
                          pkt.kind = PacketKind.ESC;
                          pkt.text = this._buffer.slice(0, 1);
                          this._buffer = this._buffer.slice(1);
                          return pkt;
                      }
                  }
                  {
                      var match_2 = this._osc_st.exec(this._buffer);
                      if (match_2 === null) {
                          pkt.kind = PacketKind.Incomplete;
                          return pkt;
                      }
                      if (match_2[3]) {
                          pkt.kind = PacketKind.ESC;
                          pkt.text = this._buffer.slice(0, 1);
                          this._buffer = this._buffer.slice(1);
                          return pkt;
                      }
                  }
                  if (!this._osc_regex) {
                      this._osc_regex = rgx(__makeTemplateObject(["\n                        ^                           # beginning of line\n                                                    #\n                        \u001B]8;                    # OSC Hyperlink\n                        [ -:<-~]*       # params (excluding ;)\n                        ;                           # end of params\n                        ([!-~]{0,512})        # URL capture\n                        (?:                         # ST\n                          (?:\u001B\\)                  # ESC                           |                           # alternate\n                          (?:\u0007)                    # BEL (what xterm did)\n                        )\n                        ([ -~]+)              # TEXT capture\n                        \u001B]8;;                   # OSC Hyperlink End\n                        (?:                         # ST\n                          (?:\u001B\\)                  # ESC                           |                           # alternate\n                          (?:\u0007)                    # BEL (what xterm did)\n                        )\n                    "], ["\n                        ^                           # beginning of line\n                                                    #\n                        \\x1b\\]8;                    # OSC Hyperlink\n                        [\\x20-\\x3a\\x3c-\\x7e]*       # params (excluding ;)\n                        ;                           # end of params\n                        ([\\x21-\\x7e]{0,512})        # URL capture\n                        (?:                         # ST\n                          (?:\\x1b\\\\)                  # ESC \\\n                          |                           # alternate\n                          (?:\\x07)                    # BEL (what xterm did)\n                        )\n                        ([\\x20-\\x7e]+)              # TEXT capture\n                        \\x1b\\]8;;                   # OSC Hyperlink End\n                        (?:                         # ST\n                          (?:\\x1b\\\\)                  # ESC \\\n                          |                           # alternate\n                          (?:\\x07)                    # BEL (what xterm did)\n                        )\n                    "]));
                  }
                  var match = this._buffer.match(this._osc_regex);
                  if (match === null) {
                      pkt.kind = PacketKind.ESC;
                      pkt.text = this._buffer.slice(0, 1);
                      this._buffer = this._buffer.slice(1);
                      return pkt;
                  }
                  pkt.kind = PacketKind.OSCURL;
                  pkt.url = match[1];
                  pkt.text = match[2];
                  var rpos = match[0].length;
                  this._buffer = this._buffer.slice(rpos);
                  return pkt;
              }
          }
      };
      AnsiUp.prototype.ansi_to_html = function (txt) {
          this.append_buffer(txt);
          var blocks = [];
          while (true) {
              var packet = this.get_next_packet();
              if ((packet.kind == PacketKind.EOS)
                  || (packet.kind == PacketKind.Incomplete))
                  break;
              if ((packet.kind == PacketKind.ESC)
                  || (packet.kind == PacketKind.Unknown))
                  continue;
              if (packet.kind == PacketKind.Text)
                  blocks.push(this.transform_to_html(this.with_state(packet)));
              else if (packet.kind == PacketKind.SGR)
                  this.process_ansi(packet);
              else if (packet.kind == PacketKind.OSCURL)
                  blocks.push(this.process_hyperlink(packet));
          }
          return blocks.join("");
      };
      AnsiUp.prototype.with_state = function (pkt) {
          return { bold: this.bold, italic: this.italic, underline: this.underline, fg: this.fg, bg: this.bg, text: pkt.text };
      };
      AnsiUp.prototype.process_ansi = function (pkt) {
          var sgr_cmds = pkt.text.split(';');
          while (sgr_cmds.length > 0) {
              var sgr_cmd_str = sgr_cmds.shift();
              var num = parseInt(sgr_cmd_str, 10);
              if (isNaN(num) || num === 0) {
                  this.fg = this.bg = null;
                  this.bold = false;
                  this.italic = false;
                  this.underline = false;
              }
              else if (num === 1) {
                  this.bold = true;
              }
              else if (num === 3) {
                  this.italic = true;
              }
              else if (num === 4) {
                  this.underline = true;
              }
              else if (num === 22) {
                  this.bold = false;
              }
              else if (num === 23) {
                  this.italic = false;
              }
              else if (num === 24) {
                  this.underline = false;
              }
              else if (num === 39) {
                  this.fg = null;
              }
              else if (num === 49) {
                  this.bg = null;
              }
              else if ((num >= 30) && (num < 38)) {
                  this.fg = this.ansi_colors[0][(num - 30)];
              }
              else if ((num >= 40) && (num < 48)) {
                  this.bg = this.ansi_colors[0][(num - 40)];
              }
              else if ((num >= 90) && (num < 98)) {
                  this.fg = this.ansi_colors[1][(num - 90)];
              }
              else if ((num >= 100) && (num < 108)) {
                  this.bg = this.ansi_colors[1][(num - 100)];
              }
              else if (num === 38 || num === 48) {
                  if (sgr_cmds.length > 0) {
                      var is_foreground = (num === 38);
                      var mode_cmd = sgr_cmds.shift();
                      if (mode_cmd === '5' && sgr_cmds.length > 0) {
                          var palette_index = parseInt(sgr_cmds.shift(), 10);
                          if (palette_index >= 0 && palette_index <= 255) {
                              if (is_foreground)
                                  this.fg = this.palette_256[palette_index];
                              else
                                  this.bg = this.palette_256[palette_index];
                          }
                      }
                      if (mode_cmd === '2' && sgr_cmds.length > 2) {
                          var r = parseInt(sgr_cmds.shift(), 10);
                          var g = parseInt(sgr_cmds.shift(), 10);
                          var b = parseInt(sgr_cmds.shift(), 10);
                          if ((r >= 0 && r <= 255) && (g >= 0 && g <= 255) && (b >= 0 && b <= 255)) {
                              var c = { rgb: [r, g, b], class_name: 'truecolor' };
                              if (is_foreground)
                                  this.fg = c;
                              else
                                  this.bg = c;
                          }
                      }
                  }
              }
          }
      };
      AnsiUp.prototype.transform_to_html = function (fragment) {
          var txt = fragment.text;
          if (txt.length === 0)
              return txt;
          txt = this.escape_txt_for_html(txt);
          if (!fragment.bold && !fragment.italic && !fragment.underline && fragment.fg === null && fragment.bg === null)
              return txt;
          var styles = [];
          var classes = [];
          var fg = fragment.fg;
          var bg = fragment.bg;
          if (fragment.bold)
              styles.push('font-weight:bold');
          if (fragment.italic)
              styles.push('font-style:italic');
          if (fragment.underline)
              styles.push('text-decoration:underline');
          if (!this._use_classes) {
              if (fg)
                  styles.push("color:rgb(" + fg.rgb.join(',') + ")");
              if (bg)
                  styles.push("background-color:rgb(" + bg.rgb + ")");
          }
          else {
              if (fg) {
                  if (fg.class_name !== 'truecolor') {
                      classes.push(fg.class_name + "-fg");
                  }
                  else {
                      styles.push("color:rgb(" + fg.rgb.join(',') + ")");
                  }
              }
              if (bg) {
                  if (bg.class_name !== 'truecolor') {
                      classes.push(bg.class_name + "-bg");
                  }
                  else {
                      styles.push("background-color:rgb(" + bg.rgb.join(',') + ")");
                  }
              }
          }
          var class_string = '';
          var style_string = '';
          if (classes.length)
              class_string = " class=\"" + classes.join(' ') + "\"";
          if (styles.length)
              style_string = " style=\"" + styles.join(';') + "\"";
          return "<span" + style_string + class_string + ">" + txt + "</span>";
      };
      ;
      AnsiUp.prototype.process_hyperlink = function (pkt) {
          var parts = pkt.url.split(':');
          if (parts.length < 1)
              return '';
          if (!this._url_whitelist[parts[0]])
              return '';
          var result = "<a href=\"" + this.escape_txt_for_html(pkt.url) + "\">" + this.escape_txt_for_html(pkt.text) + "</a>";
          return result;
      };
      return AnsiUp;
  }());
  function rgx(tmplObj) {
      var subst = [];
      for (var _i = 1; _i < arguments.length; _i++) {
          subst[_i - 1] = arguments[_i];
      }
      var regexText = tmplObj.raw[0];
      var wsrgx = /^\s+|\s+\n|\s*#[\s\S]*?\n|\n/gm;
      var txt2 = regexText.replace(wsrgx, '');
      return new RegExp(txt2);
  }
  function rgxG(tmplObj) {
      var subst = [];
      for (var _i = 1; _i < arguments.length; _i++) {
          subst[_i - 1] = arguments[_i];
      }
      var regexText = tmplObj.raw[0];
      var wsrgx = /^\s+|\s+\n|\s*#[\s\S]*?\n|\n/gm;
      var txt2 = regexText.replace(wsrgx, '');
      return new RegExp(txt2, 'g');
  }
      Object.defineProperty(exports, "__esModule", { value: true });
      exports.default = AnsiUp;
  }));
  // micromodal: https://github.com/Ghosh/micromodal
  !function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).MicroModal=t()}(this,(function(){"use strict";function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var n,i,a,r,s,l=(n=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],i=function(){function o(e){var n=e.targetModal,i=e.triggers,a=void 0===i?[]:i,r=e.onShow,s=void 0===r?function(){}:r,l=e.onClose,c=void 0===l?function(){}:l,d=e.openTrigger,u=void 0===d?"data-micromodal-trigger":d,f=e.closeTrigger,h=void 0===f?"data-micromodal-close":f,v=e.openClass,g=void 0===v?"is-open":v,m=e.disableScroll,b=void 0!==m&&m,y=e.disableFocus,p=void 0!==y&&y,w=e.awaitCloseAnimation,E=void 0!==w&&w,k=e.awaitOpenAnimation,M=void 0!==k&&k,A=e.debugMode,C=void 0!==A&&A;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.modal=document.getElementById(n),this.config={debugMode:C,disableScroll:b,openTrigger:u,closeTrigger:h,openClass:g,onShow:s,onClose:c,awaitCloseAnimation:E,awaitOpenAnimation:M,disableFocus:p},a.length>0&&this.registerTriggers.apply(this,t(a)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}var i,a,r;return i=o,(a=[{key:"registerTriggers",value:function(){for(var e=this,t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];o.filter(Boolean).forEach((function(t){t.addEventListener("click",(function(t){return e.showModal(t)}))}))}},{key:"showModal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation){var o=function t(){e.modal.removeEventListener("animationend",t,!1),e.setFocusToFirstNode()};this.modal.addEventListener("animationend",o,!1)}else this.setFocusToFirstNode();this.config.onShow(this.modal,this.activeElement,t)}},{key:"closeModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.modal;if(this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,e),this.config.awaitCloseAnimation){var o=this.config.openClass;this.modal.addEventListener("animationend",(function e(){t.classList.remove(o),t.removeEventListener("animationend",e,!1)}),!1)}else t.classList.remove(this.config.openClass)}},{key:"closeModalById",value:function(e){this.modal=document.getElementById(e),this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function(e){if(this.config.disableScroll){var t=document.querySelector("body");switch(e){case"enable":Object.assign(t.style,{overflow:""});break;case"disable":Object.assign(t.style,{overflow:"hidden"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(e){(e.target.hasAttribute(this.config.closeTrigger)||e.target.parentNode.hasAttribute(this.config.closeTrigger))&&(e.preventDefault(),e.stopPropagation(),this.closeModal(e))}},{key:"onKeydown",value:function(e){27===e.keyCode&&this.closeModal(e),9===e.keyCode&&this.retainFocus(e)}},{key:"getFocusableNodes",value:function(){var e=this.modal.querySelectorAll(n);return Array.apply(void 0,t(e))}},{key:"setFocusToFirstNode",value:function(){var e=this;if(!this.config.disableFocus){var t=this.getFocusableNodes();if(0!==t.length){var o=t.filter((function(t){return!t.hasAttribute(e.config.closeTrigger)}));o.length>0&&o[0].focus(),0===o.length&&t[0].focus()}}}},{key:"retainFocus",value:function(e){var t=this.getFocusableNodes();if(0!==t.length)if(t=t.filter((function(e){return null!==e.offsetParent})),this.modal.contains(document.activeElement)){var o=t.indexOf(document.activeElement);e.shiftKey&&0===o&&(t[t.length-1].focus(),e.preventDefault()),!e.shiftKey&&t.length>0&&o===t.length-1&&(t[0].focus(),e.preventDefault())}else t[0].focus()}}])&&e(i.prototype,a),r&&e(i,r),o}(),a=null,r=function(e){if(!document.getElementById(e))return console.warn("MicroModal: ❗Seems like you have missed %c'".concat(e,"'"),"background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'.concat(e,'"></div>')),!1},s=function(e,t){if(function(e){e.length<=0&&(console.warn("MicroModal: ❗Please specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>'))}(e),!t)return!0;for(var o in t)r(o);return!0},{init:function(e){var o=Object.assign({},{openTrigger:"data-micromodal-trigger"},e),n=t(document.querySelectorAll("[".concat(o.openTrigger,"]"))),r=function(e,t){var o=[];return e.forEach((function(e){var n=e.attributes[t].value;void 0===o[n]&&(o[n]=[]),o[n].push(e)})),o}(n,o.openTrigger);if(!0!==o.debugMode||!1!==s(n,r))for(var l in r){var c=r[l];o.targetModal=l,o.triggers=t(c),a=new i(o)}},show:function(e,t){var o=t||{};o.targetModal=e,!0===o.debugMode&&!1===r(e)||(a&&a.removeEventListeners(),(a=new i(o)).showModal())},close:function(e){e?a.closeModalById(e):a.closeModal()}});return"undefined"!=typeof window&&(window.MicroModal=l),l}));  
  window.define = window.backupDefine; window.backupDefine = undefined;
  </script>
<script type="text/javascript">
  (function () {
    // forward keydown events so shortcuts can work in vscode, see:
    // https://github.com/microsoft/vscode/issues/65452#issuecomment-586485815
    if (window.parent.postMessage) {
      window.document.addEventListener('keydown', e => {
        const event = {
          type: "keydown",
          data: {
            altKey: e.altKey,
            code: e.code,
            ctrlKey: e.ctrlKey,
            isComposing: e.isComposing,
            key: e.key,
            location: e.location,
            metaKey: e.metaKey,
            repeat: e.repeat,
            shiftKey: e.shiftKey
          }
        };
        window.parent.postMessage(event, '*');
      });
    }
    // listen for execCommand messages
    window.addEventListener("message", function (event) {
      if (event.data.type === "devhost-exec-command") {
        window.document.execCommand(event.data.data);
      } 
    }, true);
    const logEntries = new Array(1000);
    logEntries.offset = 0;
    function recordLogEntry(entry) {
      logEntries[logEntries.offset++] = entry;
      logEntries.offset %= logEntries.length;
    }
    function getLogEntry(i) { // backwards, 0 is most recent
        return logEntries[(logEntries.offset - 1 - i + logEntries.length) % logEntries.length];
    }
    const protocol = window.location.protocol === "https:" ? "wss:" : "ws:";
    let path = window.location.pathname;
    if (!/\/$/.test(path)) path += "/";
    const devServerSocket = new WebSocket(protocol + "//" + window.location.host + path);
    let reloadPage = true;
    addEventListener("beforeunload", () => {
      // don't reload page in case of navigation events
      reloadPage = false;
    })
    devServerSocket.onopen = () => {
      console.log('Socket connection open. Listening for events.');
      // if the socket closes for any reason (e.g. this occurs in electron apps
      // when the computer suspends) then reload to reestablish the connection 
      devServerSocket.onclose = () => {
        if (reloadPage) {
          console.log('Socket connection closed. Reloading.');
          window.location.reload(true);
        }
      }
    };
    // append for errors that occur within the error window
    let lastError = 0;
    const kErrorWindow = 2500;
    function showError(msg) {
      const ansiUp = new AnsiUp
      const html = ansiUp.ansi_to_html(msg.trim());
      const display = document.getElementById("quarto-log-error-display");
      if (display.innerHTML && ((Date.now() - lastError) < kErrorWindow)) {
        display.innerHTML = display.innerHTML + "<br/>" +  html;
      } else {
        display.innerHTML = html
      }
      lastError = Date.now()
      MicroModal.show('quarto-log-error-modal', {
        awaitCloseAnimation: true,
        onClose: () => { display.innerHTML = ""; }
      });
      // post message to parent indicating we had an error
      if (window.parent.postMessage) {
        window.parent.postMessage({
          type: "error",
          msg: msg,
        }, "*");
      }
    }
    // see if there is already an error to show
    const renderError = document.getElementById("quarto-render-error");
    if (renderError) {
      showError(renderError.innerHTML.trim());
    }
    const normalizeTarget = (target) => {
      return target.replace(/\/index\.html/, "/")
    };
    devServerSocket.onmessage = (msg) => {
      if (msg.data.startsWith('reload')) {
        let target = normalizeTarget(msg.data.replace(/^reload/, ""));
        // prepend proxy path to target if we have one
        if (target) {
          const pathPrefix = 
            window.location.pathname.match(/^.*?\/p\/\w+\//) ||
            window.location.pathname.match(/^.*?\/user\/[\w\d]+\/proxy\/\d+\//);
          if (pathPrefix) {
            target = pathPrefix + target.slice(1);
          }
        }
        if (target && (target !== normalizeTarget(window.location.pathname))) {
          window.location.replace(target);
        } else {
          window.location.reload(true);
        }
      } else if (msg.data.startsWith('log:')) {
        const ansiUp = new AnsiUp
        const log = JSON.parse(msg.data.substr(4));
        recordLogEntry(log);
        if (log.levelName === "ERROR") {
          showError(log.msgFormatted)
        } else {
          // see if there is a knitr error to report
          const kExecutionHalted = "Execution halted";
          if (log.msg.indexOf(kExecutionHalted) !== -1) {
            // scan backwards for beginning of error
            const errorEntries = [getLogEntry(0).msgFormatted];
            for (let i=1; i<logEntries.length; i++) {
              const logEntry = getLogEntry(i);
              if (logEntry) {
                errorEntries.unshift(logEntry.msgFormatted);
                if (logEntry.msg.indexOf("Quitting from lines") !== -1) {
                  showError(errorEntries.join(""));
                  break;
                } else if (logEntry.msg.indexOf(kExecutionHalted) !== -1) {
                  break;
                }
              } else {
                break;
              }
            }
          }
        }
      }
    };
  })();
</script>

<script type="text/javascript">
  if (window.parent.postMessage) {
    // wait for message providing confirmation we are in a devhost
    window.addEventListener("message", function (event) {
      if (event.data.type === "devhost-init") {
        window.quartoDevhost = {
          openInputFile: function (line, column, highlight) {
            window.parent.postMessage({
              type: "openfile",
              file: "C:\Users\Rie\OneDrive - London School of Hygiene and Tropical Medicine\Documents\MAPS\NTPS\TNPS_W5\Week10unitconv.qmd",
              line: line,
              column: column,
              highlight: highlight
            }, event.origin);
          }
        };
      } else if (event.data.type === "goback") {
        window.history.back()
      } else if (event.data.type === "goforward") {
        window.history.forward()
      }
    }, true);
    // notify host of navigation (e.g. for 'pop out' command)
    window.parent.postMessage({
      type: "navigate",
      href: window.location.href,
      file: "C:\Users\Rie\OneDrive - London School of Hygiene and Tropical Medicine\Documents\MAPS\NTPS\TNPS_W5\Week10unitconv.qmd"
    }, "*");
  }
</script>
</body></html>
